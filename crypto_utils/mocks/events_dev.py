from collections import namedtuple

Market_Event = namedtuple("Event", "market_filled account_update market_new")


# ----------------------------- SPOT data event---------------------------

spot_market_filled = {'stream_type': '!userData@arr', 'event_type': 'executionReport', 'event_time': 1644572414396, 'symbol': 'LTCUSDT', 'client_order_id': 'Zxu56JS7YSRH2UmRrMF4Zf', 'side': 'SELL', 'order_type': 'MARKET', 'time_in_force': 'GTC', 'order_quantity': '1.00000000', 'order_price': '0.00000000', 'stop_price': '0.00000000', 'iceberg_quantity': '0.00000000', 'ignore_g': -1, 'original_client_order_id': '', 'current_execution_type': 'TRADE', 'current_order_status': 'FILLED', 'order_reject_reason': 'NONE', 'order_id': 110962,
                      'last_executed_quantity': '1.00000000', 'cumulative_filled_quantity': '1.00000000', 'last_executed_price': '133.00000000', 'commission_amount': '0.00000000', 'commission_asset': 'USDT', 'transaction_time': 1644572414395, 'trade_id': 16271, 'ignore_I': 227488, 'is_order_working': False, 'is_trade_maker_side': False, 'ignore_M': True, 'order_creation_time': 1644572414395, 'cumulative_quote_asset_transacted_quantity': '133.00000000', 'last_quote_asset_transacted_quantity': '133.00000000', 'unicorn_fied': ['binance.com', '0.11.0'], 'market_type': 'spot'}
spot_market_new = {'stream_type': '!userData@arr', 'event_type': 'executionReport', 'event_time': 1644572414396, 'symbol': 'LTCUSDT', 'client_order_id': 'Zxu56JS7YSRH2UmRrMF4Zf', 'side': 'SELL', 'order_type': 'MARKET', 'time_in_force': 'GTC', 'order_quantity': '1.00000000', 'order_price': '0.00000000', 'stop_price': '0.00000000', 'iceberg_quantity': '0.00000000', 'ignore_g': -1, 'original_client_order_id': '', 'current_execution_type': 'NEW', 'current_order_status': 'NEW', 'order_reject_reason': 'NONE', 'order_id': 110962,
                   'last_executed_quantity': '0.00000000', 'cumulative_filled_quantity': '0.00000000', 'last_executed_price': '0.00000000', 'commission_amount': '0', 'commission_asset': None, 'transaction_time': 1644572414395, 'trade_id': -1, 'ignore_I': 227487, 'is_order_working': True, 'is_trade_maker_side': False, 'ignore_M': False, 'order_creation_time': 1644572414395, 'cumulative_quote_asset_transacted_quantity': '0.00000000', 'last_quote_asset_transacted_quantity': '0.00000000', 'unicorn_fied': ['binance.com', '0.11.0'], 'market_type': 'spot'}
spot_account_update = {'stream_type': '!userData@arr', 'event_type': 'outboundAccountPosition', 'event_time': 1644572414396, 'last_update_time': 1644572414395, 'balances': [
    {'asset': 'LTC',
     'free': '481.00000000', 'locked': '0.00000000'}, {'asset': 'USDT', 'free': '11677.22267600', 'locked': '0.00000000'}], 'unicorn_fied': ['binance.com', '0.11.0'], 'market_type': 'spot'}

spot_market_order = {'symbol': 'LTCUSDT', 'orderId': 635355, 'orderListId': -1, 'clientOrderId': 'NRlgQfGPxgBoDoksnph9In', 'transactTime': 1644846556142, 'price': '0.00000000',
                     'origQty': '2.00000000', 'executedQty': '0.00000000', 'cummulativeQuoteQty': '0.00000000', 'status': 'EXPIRED', 'timeInForce': 'GTC', 'type': 'MARKET', 'side': 'SELL', 'fills': []}

spot_limit_cancel = {'stream_type': '!userData@arr', 'event_type': 'executionReport', 'event_time': 1647689947814, 'symbol': 'BTCUSDT', 'client_order_id': 'LYmRYE7Nv3AyKxMFoa6VOF', 'side': 'BUY', 'order_type': 'LIMIT', 'time_in_force': 'GTC', 'order_quantity': '1.00000000', 'order_price': '10000.00000000', 'stop_price': '0.00000000', 'iceberg_quantity': '0.00000000', 'ignore_g': -1, 'original_client_order_id': 'Vng12jqiatTqCyHV8KYNOY', 'current_execution_type': 'CANCELED', 'current_order_status': 'CANCELED', 'order_reject_reason': 'NONE',
                     'order_id': 8230581, 'last_executed_quantity': '0.00000000', 'cumulative_filled_quantity': '0.00000000', 'last_executed_price': '0.00000000', 'commission_amount': '0', 'commission_asset': None, 'transaction_time': 1647689947814, 'trade_id': -1, 'ignore_I': 19180156, 'is_order_working': False, 'is_trade_maker_side': False, 'ignore_M': False, 'order_creation_time': 1647689855607, 'cumulative_quote_asset_transacted_quantity': '0.00000000', 'last_quote_asset_transacted_quantity': '0.00000000', 'unicorn_fied': ['binance.com', '0.11.1'], 'market_type': 'spot'}

spot_market = Market_Event(
    spot_account_update, spot_market_filled, spot_market_new)


# ---------------------------------- Futures data even---------------------
# spliting the account update would allow me to test later on the logic on changing the funds db
futures_limit_new = {'stream_type': 'ORDER_TRADE_UPDATE', 'event_type': 'ORDER_TRADE_UPDATE', 'event_time': 1644576395114, 'symbol': 'BTCUSDT', 'client_order_id': 'web_NlStfVRoa6Fim23Ht7UV', 'side': 'BUY', 'order_type': 'LIMIT', 'time_in_force': 'GTC', 'order_quantity': '0.001', 'order_price': '43464.50', 'order_avg_price': '0', 'order_stop_price': '0', 'current_execution_type': 'NEW', 'current_order_status': 'NEW', 'order_id': 2978444274,
                     'last_executed_quantity': '0', 'cumulative_filled_quantity': '0', 'last_executed_price': '0', 'transaction_time': 1644576395112, 'trade_id': 0, 'net_pay': '43.46450', 'net_selling_order_value': '0', 'is_trade_maker_side': False, 'reduce_only': False, 'trigger_price_type': 'CONTRACT_PRICE', 'order_price_type': 'LIMIT', 'position_side': 'BOTH', 'order_realized_profit': '0', 'unicorn_fied': ['binance.com-futures', '0.11.0'], 'market_type': 'futures'}
futures_limit_account_update = {'stream_type': 'ACCOUNT_UPDATE', 'event_type': 'ACCOUNT_UPDATE', 'event_time': 1644576455432, 'transaction': 1644576455429, 'event_reason': 'ORDER', 'balances': [{'asset': 'USDT', 'wallet_balance': '10449.40452915', 'cross_wallet_balance': '10447.23999705'}], 'positions': [
    {'symbol': 'BTCUSDT', 'position_amount': '0.001', 'entry_price': '43464.50000', 'accumulated_realized': '529.17417012', 'upnl': '-0.00271080', 'margin_type': 'isolated', 'isolated_wallet': '2.16453210', 'position_side': 'BOTH'}], 'unicorn_fied': ['binance.com-futures', '0.11.0'], 'market_type': 'futures'}
futures_limit_filled = {'stream_type': 'ORDER_TRADE_UPDATE', 'event_type': 'ORDER_TRADE_UPDATE', 'event_time': 1644576455432, 'symbol': 'BTCUSDT', 'client_order_id': 'web_NlStfVRoa6Fim23Ht7UV', 'side': 'BUY', 'order_type': 'LIMIT', 'time_in_force': 'GTC', 'order_quantity': '0.001', 'order_price': '43464.50', 'order_avg_price': '43464.50000', 'order_stop_price': '0', 'current_execution_type': 'TRADE', 'current_order_status': 'FILLED', 'order_id': 2978444274,
                        'last_executed_quantity': '0.001', 'cumulative_filled_quantity': '0.001', 'last_executed_price': '43464.50', 'transaction_time': 1644576455429, 'trade_id': 223357056, 'net_pay': '0', 'net_selling_order_value': '0', 'is_trade_maker_side': True, 'reduce_only': False, 'trigger_price_type': 'CONTRACT_PRICE', 'order_price_type': 'LIMIT', 'position_side': 'BOTH', 'order_realized_profit': '0', 'unicorn_fied': ['binance.com-futures', '0.11.0'], 'market_type': 'futures'}


futures_market_new = {'stream_type': 'ORDER_TRADE_UPDATE', 'event_type': 'ORDER_TRADE_UPDATE', 'event_time': 1645023647192, 'symbol': 'BTCUSDT', 'client_order_id': 'web_qewh0yEVJjrkuxSV4ZTL', 'side': 'BUY', 'order_type': 'MARKET', 'time_in_force': 'GTC', 'order_quantity': '0.002', 'order_price': '0', 'order_avg_price': '0', 'order_stop_price': '0', 'current_execution_type': 'NEW', 'current_order_status': 'NEW', 'order_id': 2979794142,
                      'last_executed_quantity': '0', 'cumulative_filled_quantity': '0', 'last_executed_price': '0', 'transaction_time': 1645023647190, 'trade_id': 0, 'net_pay': '0', 'net_selling_order_value': '0', 'is_trade_maker_side': False, 'reduce_only': False, 'trigger_price_type': 'CONTRACT_PRICE', 'order_price_type': 'MARKET', 'position_side': 'BOTH', 'order_realized_profit': '0', 'unicorn_fied': ['binance.com-futures', '0.11.0'], 'market_type': 'futures'}
futures_market_account_update = {'stream_type': 'ACCOUNT_UPDATE', 'event_type': 'ACCOUNT_UPDATE', 'event_time': 1645023647192, 'transaction': 1645023647190, 'event_reason': 'ORDER', 'balances': [{'asset': 'USDT', 'wallet_balance': '10440.13721502', 'cross_wallet_balance': '10392.33101983'}], 'positions': [
    {'symbol': 'BTCUSDT', 'position_amount': '0.022', 'entry_price': '43523.13636', 'accumulated_realized': '525.18281012', 'upnl': '-0.03950234', 'margin_type': 'isolated', 'isolated_wallet': '47.80619519', 'position_side': 'BOTH'}], 'unicorn_fied': ['binance.com-futures', '0.11.0'], 'market_type': 'futures'}
futures_market_filled = {'stream_type': 'ORDER_TRADE_UPDATE', 'event_type': 'ORDER_TRADE_UPDATE', 'event_time': 1645023647192, 'symbol': 'BTCUSDT', 'client_order_id': 'web_qewh0yEVJjrkuxSV4ZTL', 'side': 'BUY', 'order_type': 'MARKET', 'time_in_force': 'GTC', 'order_quantity': '0.002', 'order_price': '0', 'order_avg_price': '43500', 'order_stop_price': '0', 'current_execution_type': 'TRADE', 'current_order_status': 'FILLED', 'order_id': 2979794142,
                         'last_executed_quantity': '0.002', 'cumulative_filled_quantity': '0.002', 'last_executed_price': '43500', 'transaction_time': 1645023647190, 'trade_id': 223583394, 'net_pay': '0', 'net_selling_order_value': '0', 'is_trade_maker_side': False, 'reduce_only': False, 'trigger_price_type': 'CONTRACT_PRICE', 'order_price_type': 'MARKET', 'position_side': 'BOTH', 'order_realized_profit': '0', 'unicorn_fied': ['binance.com-futures', '0.11.0'], 'market_type': 'futures'}

futures_limit_canceled = {'stream_type': 'ORDER_TRADE_UPDATE', 'event_type': 'ORDER_TRADE_UPDATE', 'event_time': 1647689286287, 'symbol': 'BTCUSDT', 'client_order_id': 'web_fLT9J7j1nIEHWAYRdmXG', 'side': 'BUY', 'order_type': 'LIMIT', 'time_in_force': 'GTC', 'order_quantity': '0.006', 'order_price': '14754.60', 'order_avg_price': '0', 'order_stop_price': '0', 'current_execution_type': 'CANCELED', 'current_order_status': 'CANCELED', 'order_id': 2997727567,
                          'last_executed_quantity': '0', 'cumulative_filled_quantity': '0', 'last_executed_price': '0', 'transaction_time': 1647689286285, 'trade_id': 0, 'net_pay': '0', 'net_selling_order_value': '0', 'is_trade_maker_side': False, 'reduce_only': False, 'trigger_price_type': 'CONTRACT_PRICE', 'order_price_type': 'LIMIT', 'position_side': 'BOTH', 'order_realized_profit': '0', 'unicorn_fied': ['binance.com-futures', '0.11.1'], 'market_type': 'futures'}


futures_market_order = {'orderId': 2979794181, 'symbol': 'BTCUSDT', 'status': 'NEW', 'clientOrderId': 'LqIsFeaj3YnRsLSZMr1dRS', 'price': '0', 'avgPrice': '0.00000', 'origQty': '0.001', 'executedQty': '0', 'cumQty': '0', 'cumQuote': '0',
                        'timeInForce': 'GTC', 'type': 'MARKET', 'reduceOnly': False, 'closePosition': False, 'side': 'BUY', 'positionSide': 'BOTH', 'stopPrice': '0', 'workingType': 'CONTRACT_PRICE', 'priceProtect': False, 'origType': 'MARKET', 'updateTime': 1645023650508}

futures_market = Market_Event(futures_market_filled,
                              futures_market_account_update, futures_market_new)


# ------------ account balance
spot_account_balance = {'makerCommission': 0, 'takerCommission': 0, 'buyerCommission': 0, 'sellerCommission': 0, 'canTrade': True, 'canWithdraw': False, 'canDeposit': False, 'updateTime': 1644679899401, 'accountType': 'SPOT', 'balances': [{'asset': 'BNB', 'free': '1000.00000000', 'locked': '0.00000000'}, {'asset': 'BTC', 'free': '1.20000000', 'locked': '0.00000000'}, {
    'asset': 'BUSD', 'free': '10000.00000000', 'locked': '0.00000000'}, {'asset': 'ETH', 'free': '100.00000000', 'locked': '0.00000000'}, {'asset': 'LTC', 'free': '461.00000000', 'locked': '0.00000000'}, {'asset': 'TRX', 'free': '500000.00000000', 'locked': '0.00000000'}, {'asset': 'USDT', 'free': '7630.16880800', 'locked': '295.00000000'}, {'asset': 'XRP', 'free': '50000.00000000', 'locked': '0.00000000'}], 'permissions': ['SPOT']}

futures_account_balance = [{'accountAlias': 'SgSgmYTifWoCoC', 'asset': 'DOT', 'balance': '0.00000000', 'withdrawAvailable': '0.00000000', 'updateTime': 0}, {'accountAlias': 'SgSgmYTifWoCoC', 'asset': 'BTC', 'balance': '0.00000000', 'withdrawAvailable': '0.00000000', 'updateTime': 0}, {'accountAlias': 'SgSgmYTifWoCoC', 'asset': 'SOL', 'balance': '0.00000000', 'withdrawAvailable': '0.00000000', 'updateTime': 0}, {'accountAlias': 'SgSgmYTifWoCoC', 'asset': 'BNB', 'balance': '0.00000001', 'withdrawAvailable': '0.00000001', 'updateTime': 1626339526868}, {'accountAlias': 'SgSgmYTifWoCoC', 'asset': 'ETH', 'balance': '0.00000000', 'withdrawAvailable': '0.00000000', 'updateTime': 0}, {'accountAlias': 'SgSgmYTifWoCoC', 'asset': 'ADA', 'balance': '0.00000000', 'withdrawAvailable': '0.00000000', 'updateTime': 0}, {'accountAlias': 'SgSgmYTifWoCoC', 'asset': 'USDT', 'balance': '5306.77812925', 'withdrawAvailable': '4784.90782490', 'updateTime': 1646990257192}, {'accountAlias': 'SgSgmYTifWoCoC', 'asset': 'XRP', 'balance': '0.00000000', 'withdrawAvailable': '0.00000000', 'updateTime': 0}, {'accountAlias': 'SgSgmYTifWoCoC', 'asset': 'BUSD', 'balance': '0.00000000', 'withdrawAvailable': '0.00000000', 'updateTime': 0}]


# ------------------------- cancel order
limit_futures_cancel = {'orderId': 2979836453, 'symbol': 'BTCUSDT', 'status': 'CANCELED', 'clientOrderId': 'web_sLn0yNW1arRC3FYhjtxQ', 'price': '42603.40', 'avgPrice': '0.00000', 'origQty': '0.002', 'executedQty': '0', 'cumQty': '0', 'cumQuote': '0',
                        'timeInForce': 'GTC', 'type': 'LIMIT', 'reduceOnly': False, 'closePosition': False, 'side': 'BUY', 'positionSide': 'BOTH', 'stopPrice': '0', 'workingType': 'CONTRACT_PRICE', 'priceProtect': False, 'origType': 'LIMIT', 'updateTime': 1645032286927}

# -------------------------- real orders ----------------------------------
spot_limit_new = {'stream_type': '!userData@arr', 'event_type': 'executionReport', 'event_time': 1647719063460, 'symbol': 'OCEANUSDT', 'client_order_id': 'electron_dfecdeb79b8841319bc6a28924e', 'side': 'BUY', 'order_type': 'LIMIT', 'time_in_force': 'GTC', 'order_quantity': '21.00000000', 'order_price': '0.52370000', 'stop_price': '0.00000000', 'iceberg_quantity': '0.00000000', 'ignore_g': -1, 'original_client_order_id': '', 'current_execution_type': 'NEW', 'current_order_status': 'NEW', 'order_reject_reason': 'NONE', 'order_id': 346426654,
                  'last_executed_quantity': '0.00000000', 'cumulative_filled_quantity': '0.00000000', 'last_executed_price': '0.00000000', 'commission_amount': '0', 'commission_asset': None, 'transaction_time': 1647719063459, 'trade_id': -1, 'ignore_I': 715482539, 'is_order_working': True, 'is_trade_maker_side': False, 'ignore_M': False, 'order_creation_time': 1647719063459, 'cumulative_quote_asset_transacted_quantity': '0.00000000', 'last_quote_asset_transacted_quantity': '0.00000000', 'unicorn_fied': ['binance.com', '0.11.1'], 'market_type': 'spot'}
spot_limit_filled = {'stream_type': '!userData@arr', 'event_type': 'executionReport', 'event_time': 1647719065937, 'symbol': 'OCEANUSDT', 'client_order_id': 'electron_dfecdeb79b8841319bc6a28924e', 'side': 'BUY', 'order_type': 'LIMIT', 'time_in_force': 'GTC', 'order_quantity': '21.00000000', 'order_price': '0.52370000', 'stop_price': '0.00000000', 'iceberg_quantity': '0.00000000', 'ignore_g': -1, 'original_client_order_id': '', 'current_execution_type': 'TRADE', 'current_order_status': 'FILLED', 'order_reject_reason': 'NONE', 'order_id': 346426654,
                     'last_executed_quantity': '21.00000000', 'cumulative_filled_quantity': '21.00000000', 'last_executed_price': '0.52370000', 'commission_amount': '0.02100000', 'commission_asset': 'OCEAN', 'transaction_time': 1647719065936, 'trade_id': 23328060, 'ignore_I': 715482598, 'is_order_working': False, 'is_trade_maker_side': True, 'ignore_M': True, 'order_creation_time': 1647719063459, 'cumulative_quote_asset_transacted_quantity': '10.99770000', 'last_quote_asset_transacted_quantity': '10.99770000', 'unicorn_fied': ['binance.com', '0.11.1'], 'market_type': 'spot'}
